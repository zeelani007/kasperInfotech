{"version":3,"sources":["employee.component.ts"],"names":[],"mappings":"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","file":"employee.component.js","sourcesContent":["\nimport { AfterViewInit, Component, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { Employee } from '../model/employee.model';\nimport { EmployeeService } from '../employee/employee.service';\n\n\n\n\n@Component({\n  selector: 'app-employee',\n  templateUrl: './employee.component.html',\n  styleUrls: ['./employee.component.css']\n})\nexport class EmployeeComponent implements OnInit, AfterViewInit {\n  @ViewChild('fileInput') fileInput: any;\n  @ViewChild('addEmployeeButton') addEmployeeButton: any;\n \n\n  employeeForm: FormGroup;\n\n  employees: Employee[];\n  employeesToDisplay: Employee[];\n  educationOptions = [\n    '10th pass',\n    'diploma',\n    'graduate',\n    'post graduate',\n    'PhD',\n  ];\n\n  constructor(\n    private fb: FormBuilder,\n    private employeeService: EmployeeService\n  ) {\n    this.employeeForm = fb.group({});\n    this.employees = [];\n    this.employeesToDisplay = this.employees;\n  }\n\n  ngOnInit(): void {\n    this.employeeForm = this.fb.group({\n      firstname: this.fb.control(''),\n      lastname: this.fb.control(''),\n      birthday: this.fb.control(''),\n      gender: this.fb.control(''),\n      education: this.fb.control('default'),\n      company: this.fb.control(''),\n      jobExperience: this.fb.control(''),\n      salary: this.fb.control(''),\n    });\n\n    this.employeeService.getEmployees().subscribe((res) => {\n      for (let emp of res) {\n        this.employees.unshift(emp);\n      }\n      this.employeesToDisplay = this.employees;\n    });\n  }\n\n  ngAfterViewInit(): void {\n    //this.buttontemp.nativeElement.click();\n  }\n\n  addEmployee() {\n    let employee: Employee = {\n      firstname: this.FirstName.value,\n      lastname: this.LastName.value,\n      birthdate: this.BirthDay.value,\n      gender: this.Gender.value,\n      education: this.educationOptions[parseInt(this.Education.value)],\n      company: this.Company.value,\n      jobExperience: this.JobExperience.value,\n      salary: this.Salary.value,\n      profile: this.fileInput.nativeElement.files[0]?.name,\n    };\n    this.employeeService.postEmployee(employee).subscribe((res) => {\n      this.employees.unshift(res);\n      this.clearForm();\n    });\n  }\n\n  removeEmployee(event: any) {\n    this.employees.forEach((val, index) => {\n      if (val.id === parseInt(event)) {\n        this.employeeService.deleteEmployee(event).subscribe((res) => {\n          this.employees.splice(index, 1);\n        });\n      }\n    });\n  }\n\n  editEmployee(event: any) {\n    this.employees.forEach((val, ind) => {\n      if (val.id === event) {\n        this.setForm(val);\n      }\n    });\n    this.removeEmployee(event);\n    this.addEmployeeButton.nativeElement.click();\n  }\n\n  setForm(emp: Employee) {\n    this.FirstName.setValue(emp.firstname);\n    this.LastName.setValue(emp.lastname);\n    this.BirthDay.setValue(emp.birthdate);\n    this.Gender.setValue(emp.gender);\n\n    let educationIndex = 0;\n    this.educationOptions.forEach((val, index) => {\n      if (val === emp.education) educationIndex = index;\n    });\n    this.Education.setValue(educationIndex);\n\n    this.Company.setValue(emp.company);\n    this.JobExperience.setValue(emp.jobExperience);\n    this.Salary.setValue(emp.salary);\n    this.fileInput.nativeElement.value = '';\n  }\n\n  searchEmployees(event: any) {\n    let filteredEmployees: Employee[] = [];\n\n    if (event === '') {\n      this.employeesToDisplay = this.employees;\n    } else {\n      filteredEmployees = this.employees.filter((val, index) => {\n        let targetKey = val.firstname.toLowerCase() + '' + val.lastname.toLowerCase();\n        let searchKey = event.toLowerCase();\n        return targetKey.includes(searchKey);\n      });\n      this.employeesToDisplay = filteredEmployees;\n    }\n  }\n\n  clearForm() {\n    this.FirstName.setValue('');\n    this.LastName.setValue('');\n    this.BirthDay.setValue('');\n    this.Gender.setValue('');\n    this.Education.setValue('');\n    this.Company.setValue('');\n    this.JobExperience.setValue('');\n    this.Salary.setValue('');\n    this.fileInput.nativeElement.value = '';\n  }\n\n  public get FirstName(): FormControl {\n    return this.employeeForm.get('firstname') as FormControl;\n  }\n  public get LastName(): FormControl {\n    return this.employeeForm.get('lastname') as FormControl;\n  }\n  public get BirthDay(): FormControl {\n    return this.employeeForm.get('birthday') as FormControl;\n  }\n  public get Gender(): FormControl {\n    return this.employeeForm.get('gender') as FormControl;\n  }\n  public get Education(): FormControl {\n    return this.employeeForm.get('education') as FormControl;\n  }\n  public get Company(): FormControl {\n    return this.employeeForm.get('company') as FormControl;\n  }\n  public get JobExperience(): FormControl {\n    return this.employeeForm.get('jobExperience') as FormControl;\n  }\n  public get Salary(): FormControl {\n    return this.employeeForm.get('salary') as FormControl;\n  }\n// \n\n}\n"]}